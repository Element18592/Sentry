; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.11886.00 

	TITLE	C:\Users\Element18592\Desktop\sentry\sentry\Main.cpp
	.PPC
	.MODEL FLAT
PUBLIC	__C2_11886
PUBLIC	?Devkit@Main@@3HA				; Main::Devkit
PUBLIC	?LastTitleId@Main@@3KA				; Main::LastTitleId
PUBLIC	?Terminating@Main@@3HA				; Main::Terminating
PUBLIC	?tempResults@Main@@3PAMA			; Main::tempResults
PUBLIC	??_C@_0BI@LOJKMHIG@?$FLSentry?$FN?5TitleID?3?5?$CF08x?6?$AA@ ; `string'
PUBLIC	??_C@_0BM@FMEMABHL@?$FLSentry?$FN?5ModuleHandle?3?5?$CFls?6?$AA@ ; `string'
PUBLIC	??_C@_0FA@ODKMNFA@?$FLSentry?$FN?5GPU?3?5?$CF?41f?6?$FLSentry?$FN?5CPU?3@ ; `string'
PUBLIC	??_C@_0BC@IGPEAJC@?6Sentry?5started?$CB?6?$AA@	; `string'
EXTRN	__imp_HalSendSMCMessage:PROC
EXTRN	GetModuleHandleA:PROC
EXTRN	__imp_XamGetCurrentTitleId:PROC
EXTRN	printf:PROC
EXTRN	Sleep:PROC
EXTRN	__imp_XamLoaderGetDvdTrayState:PROC
?Devkit@Main@@3HA DD 01H DUP (?)			; Main::Devkit
?LastTitleId@Main@@3KA DD 01H DUP (?)			; Main::LastTitleId
?Terminating@Main@@3HA DD 01H DUP (?)			; Main::Terminating
?tempResults@Main@@3PAMA DD 04H DUP (?)			; Main::tempResults
;	COMDAT ??_C@_0BC@IGPEAJC@?6Sentry?5started?$CB?6?$AA@
.rdata	SEGMENT
??_C@_0BC@IGPEAJC@?6Sentry?5started?$CB?6?$AA@ DB 0aH, 'Sentry started!', 0aH
	DB	00H						; `string'
;	COMDAT ??_C@_0FA@ODKMNFA@?$FLSentry?$FN?5GPU?3?5?$CF?41f?6?$FLSentry?$FN?5CPU?3@
.rdata	SEGMENT
??_C@_0FA@ODKMNFA@?$FLSentry?$FN?5GPU?3?5?$CF?41f?6?$FLSentry?$FN?5CPU?3@ DB '['
	DB	'Sentry] GPU: %.1f', 0aH, '[Sentry] CPU: %.1f', 0aH, '[Sentry]'
	DB	' eDRAM: %.1f', 0aH, '[Sentry] Mobo: %.1f', 0aH, 00H ; `string'
;	COMDAT ??_C@_0BM@FMEMABHL@?$FLSentry?$FN?5ModuleHandle?3?5?$CFls?6?$AA@
.rdata	SEGMENT
??_C@_0BM@FMEMABHL@?$FLSentry?$FN?5ModuleHandle?3?5?$CFls?6?$AA@ DB '[Sen'
	DB	'try] ModuleHandle: %ls', 0aH, 00H		; `string'
;	COMDAT ??_C@_0BI@LOJKMHIG@?$FLSentry?$FN?5TitleID?3?5?$CF08x?6?$AA@
.rdata	SEGMENT
??_C@_0BI@LOJKMHIG@?$FLSentry?$FN?5TitleID?3?5?$CF08x?6?$AA@ DB '[Sentry]'
	DB	' TitleID: %08x', 0aH, 00H			; `string'
;	COMDAT __C2_11886
.XBLD$W	SEGMENT
__C2_11886 DB	'C2', 00H, 00H, 00H, 00H, 00H, 00H, 00H, 010H, 00H, 00H, '.'
	DB	'nD', 00H
PUBLIC	?TitleThread@Main@@YAXXZ			; Main::TitleThread
EXTRN	XamGetCurrentTitleId:PROC
EXTRN	__restgprlr_26:PROC
EXTRN	__savegprlr_26:PROC
;	COMDAT .pdata
; File c:\users\element18592\desktop\sentry\sentry\main.cpp
.pdata	SEGMENT
$T103991 DD	?TitleThread@Main@@YAXXZ
	DD	040002203H
; Function compile flags: /Ogsu

	.code

?TitleThread@Main@@YAXXZ PROC NEAR			; Main::TitleThread, COMDAT

; Begin code for function: ?TitleThread@Main@@YAXXZ

; 43   : 	VOID TitleThread(){

  00000	7d8802a6	 mflr         r12
  00004	48000001	 bl           __savegprlr_26
  00008	9421ff70	 stwu         r1,-90h(r1)
.endprolog
$M103989:

; 44   : 		while (!Terminating){

  0000c	3f600000	 lis          r27,?Terminating@Main@@3HA
  00010	817b0000	 lwz          r11,?Terminating@Main@@3HA(r27)
  00014	2f0b0000	 cmpwi        cr6,r11,0
  00018	409a0068	 bne          cr6,$LN2@TitleThrea
  0001c	3d400000	 lis          r10,??_C@_0BM@FMEMABHL@?$FLSentry?$FN?5ModuleHandle?3?5?$CFls?6?$AA@
  00020	3d600000	 lis          r11,??_C@_0BI@LOJKMHIG@?$FLSentry?$FN?5TitleID?3?5?$CF08x?6?$AA@
  00024	3fc00000	 lis          r30,?LastTitleId@Main@@3KA
  00028	3baa0000	 addi         r29,r10,??_C@_0BM@FMEMABHL@?$FLSentry?$FN?5ModuleHandle?3?5?$CFls?6?$AA@
  0002c	3b8b0000	 addi         r28,r11,??_C@_0BI@LOJKMHIG@?$FLSentry?$FN?5TitleID?3?5?$CF08x?6?$AA@
$LL3@TitleThrea:					; Start of loop

; 45   : 			DWORD titleId = XamGetCurrentTitleId();

  00030	48000001	 bl           XamGetCurrentTitleId

; 46   : 			if(LastTitleId != titleId){

  00034	817e0000	 lwz          r11,?LastTitleId@Main@@3KA(r30)
  00038	7c7f1b78	 mr           r31,r3
  0003c	7f0b1840	 cmplw        cr6,r11,r3
  00040	419a002c	 beq          cr6,$LN1@TitleThrea

; 47   : 				LastTitleId = titleId;
; 48   : 				PLDR_DATA_TABLE_ENTRY moduleHandle = (PLDR_DATA_TABLE_ENTRY)GetModuleHandle(0);

  00044	907e0000	 stw          r3,?LastTitleId@Main@@3KA(r30)
  00048	38600000	 li           r3,0
  0004c	48000001	 bl           GetModuleHandleA

; 49   : 				printf("[Sentry] TitleID: %08x\n", titleId);

  00050	7c7a1b78	 mr           r26,r3
  00054	7fe4fb78	 mr           r4,r31
  00058	7f83e378	 mr           r3,r28
  0005c	48000001	 bl           printf

; 50   : 				printf("[Sentry] ModuleHandle: %ls\n", moduleHandle->BaseDllName.Buffer);

  00060	7fa3eb78	 mr           r3,r29
  00064	809a0030	 lwz          r4,30h(r26)
  00068	48000001	 bl           printf
$LN1@TitleThrea:

; 51   : 			}
; 52   : 			Sleep(500);

  0006c	386001f4	 li           r3,500		; 1F4h
  00070	48000001	 bl           Sleep
  00074	817b0000	 lwz          r11,?Terminating@Main@@3HA(r27)
  00078	2f0b0000	 cmpwi        cr6,r11,0
  0007c	419affb4	 beq          cr6,$LL3@TitleThrea
$LN2@TitleThrea:

; 53   : 		}
; 54   : 	}

  00080	38210090	 addi         r1,r1,144		; 90h
  00084	48000000	 b            __restgprlr_26
$M103990:
; End code for function: ?TitleThread@Main@@YAXXZ
?TitleThread@Main@@YAXXZ ENDP
							; Main::TitleThread
PUBLIC	?GetSystemTemperatures@Main@@YAJPAM@Z		; Main::GetSystemTemperatures
EXTRN	HalSendSMCMessage:PROC
EXTRN	_fltused:PROC
;	COMDAT .pdata
.pdata	SEGMENT
$T104001 DD	?GetSystemTemperatures@Main@@YAJPAM@Z
	DD	040002d04H
; Function compile flags: /Ogsu

	.code
tv246 = 80						; size = 8
smcMessage$ = 80					; size = 16
smcResponse$ = 96					; size = 16

?GetSystemTemperatures@Main@@YAJPAM@Z PROC NEAR		; Main::GetSystemTemperatures, COMDAT

; Begin code for function: ?GetSystemTemperatures@Main@@YAJPAM@Z

; 18   : 	HRESULT GetSystemTemperatures(PFLOAT temperatureResult){

  00000	7d8802a6	 mflr         r12
  00004	9181fff8	 stw          r12,-8(r1)
  00008	fbe1fff0	 std          r31,-10h(r1)
  0000c	9421ff80	 stwu         r1,-80h(r1)
.endprolog
$M103999:
  00010	7c7f1b78	 mr           r31,r3

; 19   : 		// Return an invalid argument if we dont have a valid array
; 20   : 		if(temperatureResult == NULL) return E_INVALIDARG;

  00014	2b030000	 cmplwi       cr6,r3,0
  00018	409a0010	 bne          cr6,$LN4@GetSystemT

; 28   : 		memset(smcResponse, 0, 16);

  0001c	3c608007	 lis          r3,-32761		; 8007h
  00020	60630057	 ori          r3,r3,87		; 57h
  00024	4800007c	 b            $LN5@GetSystemT
$LN4@GetSystemT:

; 21   : 
; 22   : 		// Create some buffers to handle the input/output of our SMC calls
; 23   : 		BYTE smcMessage[16];
; 24   : 		BYTE smcResponse[16];
; 25   : 
; 26   : 		// Initialize our buffers
; 27   : 		memset(smcMessage, 0, 16);

  00028	39410050	 addi         r10,r1,smcMessage$

; 28   : 		memset(smcResponse, 0, 16);

  0002c	39210060	 addi         r9,r1,smcResponse$
  00030	39600000	 li           r11,0

; 29   : 
; 30   : 		// Request our tempetures
; 31   : 		smcMessage[0] = 0x7;		// Temperature Request

  00034	39000007	 li           r8,7

; 32   : 		HalSendSMCMessage((LPVOID)smcMessage, (LPVOID)smcResponse);

  00038	38810060	 addi         r4,r1,smcResponse$
  0003c	f96a0000	 std          r11,0(r10)
  00040	38610050	 addi         r3,r1,smcMessage$
  00044	f96a0008	 std          r11,8(r10)
  00048	f9690000	 std          r11,0(r9)
  0004c	f9690008	 std          r11,8(r9)
  00050	99010050	 stb          r8,smcMessage$(r1)		; 80 (50h)
  00054	48000001	 bl           HalSendSMCMessage
  00058	39200004	 li           r9,4
  0005c	395ffffc	 addi         r10,r31,-4		; 0FFFCh
  00060	39610060	 addi         r11,r1,smcResponse$
  00064	7d2903a6	 mtctr        r9
  00068	3d200000	 lis          r9,__pool@_0
  0006c	c0090000	 lfs          fr0,__pool@_0(r9)
$LL3@GetSystemT:					; Start of loop

; 33   : 
; 34   : 		// Calculate our temperatures
; 35   : 		for( unsigned int typeIdx = 0; typeIdx < SMC_TEMP_TYPE_COUNT; typeIdx++){
; 36   : 			temperatureResult[typeIdx] = (FLOAT)((smcResponse[typeIdx * 2 + 1] | (smcResponse[typeIdx * 2 + 2] << 8 )) / 256.0f);

  00070	890b0001	 lbz          r8,1(r11)
  00074	8d2b0002	 lbzu         r9,2(r11)
  00078	5128442e	 rlwimi       r8,r9,8,16,23
  0007c	5509043e	 clrlwi       r9,r8,16
  00080	f9210050	 std          r9,50h(r1)
  00084	c9a10050	 lfd          fr13,50h(r1)
  00088	fda06e9c	 fcfid        fr13,fr13
  0008c	fda06818	 frsp         fr13,fr13
  00090	edad0032	 fmuls        fr13,fr13,fr0
  00094	d5aa0004	 stfsu        fr13,4(r10)
  00098	4200ffd8	 bdnz         $LL3@GetSystemT

; 37   : 		}
; 38   : 
; 39   : 		// Return Successfully
; 40   : 		return S_OK;

  0009c	38600000	 li           r3,0
$LN5@GetSystemT:

; 41   : 	}

  000a0	38210080	 addi         r1,r1,128		; 80h
  000a4	8181fff8	 lwz          r12,-8(r1)
  000a8	7d8803a6	 mtlr         r12
  000ac	ebe1fff0	 ld           r31,-10h(r1)
  000b0	4e800020	 blr
$M104000:
; End code for function: ?GetSystemTemperatures@Main@@YAJPAM@Z
?GetSystemTemperatures@Main@@YAJPAM@Z ENDP
							; Main::GetSystemTemperatures
PUBLIC	?TempThread@Main@@YAXXZ				; Main::TempThread
EXTRN	__restgprlr_28:PROC
EXTRN	__savegprlr_28:PROC
;	COMDAT .pdata
.pdata	SEGMENT
$T104023 DD	?TempThread@Main@@YAXXZ
	DD	040003f04H
; Function compile flags: /Ogsu

	.code
tv274 = 80						; size = 8
smcMessage$104009 = 96					; size = 16
smcResponse$104010 = 112				; size = 16

?TempThread@Main@@YAXXZ	PROC NEAR			; Main::TempThread, COMDAT

; Begin code for function: ?TempThread@Main@@YAXXZ

; 56   : 	VOID TempThread() {

  00000	7d8802a6	 mflr         r12
  00004	48000001	 bl           __savegprlr_28
  00008	dbe1ffd0	 stfd         fr31,-30h(r1)
  0000c	9421ff50	 stwu         r1,-0B0h(r1)
.endprolog
$M104021:

; 57   : 		while (!Terminating) {

  00010	3f800000	 lis          r28,?Terminating@Main@@3HA
  00014	817c0000	 lwz          r11,?Terminating@Main@@3HA(r28)
  00018	2f0b0000	 cmpwi        cr6,r11,0
  0001c	409a00d4	 bne          cr6,$LN2@TempThread
  00020	3d200000	 lis          r9,__pool@_0
  00024	3d600000	 lis          r11,??_C@_0FA@ODKMNFA@?$FLSentry?$FN?5GPU?3?5?$CF?41f?6?$FLSentry?$FN?5CPU?3@
  00028	3d400000	 lis          r10,?tempResults@Main@@3PAMA
  0002c	3bc00000	 li           r30,0
  00030	3bab0000	 addi         r29,r11,??_C@_0FA@ODKMNFA@?$FLSentry?$FN?5GPU?3?5?$CF?41f?6?$FLSentry?$FN?5CPU?3@
  00034	c3e90000	 lfs          fr31,__pool@_0(r9)
  00038	3bea0000	 addi         r31,r10,?tempResults@Main@@3PAMA
$LL3@TempThread:					; Start of loop

; 58   : 			HRESULT tempReturn = GetSystemTemperatures(tempResults);

  0003c	39610060	 addi         r11,r1,smcMessage$104009
  00040	39410070	 addi         r10,r1,smcResponse$104010
  00044	39200007	 li           r9,7
  00048	38810070	 addi         r4,r1,smcResponse$104010
  0004c	38610060	 addi         r3,r1,smcMessage$104009
  00050	fbcb0000	 std          r30,0(r11)
  00054	fbcb0008	 std          r30,8(r11)
  00058	fbca0000	 std          r30,0(r10)
  0005c	fbca0008	 std          r30,8(r10)
  00060	99210060	 stb          r9,smcMessage$104009(r1)		; 96 (60h)
  00064	48000001	 bl           HalSendSMCMessage
  00068	39200004	 li           r9,4
  0006c	39610070	 addi         r11,r1,smcResponse$104010
  00070	395ffffc	 addi         r10,r31,-4		; 0FFFCh
  00074	7d2903a6	 mtctr        r9
$LL8@TempThread:					; Start of loop
  00078	890b0001	 lbz          r8,1(r11)
  0007c	8d2b0002	 lbzu         r9,2(r11)
  00080	5128442e	 rlwimi       r8,r9,8,16,23
  00084	5509043e	 clrlwi       r9,r8,16
  00088	f9210050	 std          r9,50h(r1)
  0008c	c8010050	 lfd          fr0,50h(r1)
  00090	fc00069c	 fcfid        fr0,fr0
  00094	fc000018	 frsp         fr0,fr0
  00098	ec0007f2	 fmuls        fr0,fr0,fr31
  0009c	d40a0004	 stfsu        fr0,4(r10)
  000a0	4200ffd8	 bdnz         $LL8@TempThread

; 59   : 			if (tempReturn == S_OK) {
; 60   : 				printf("[Sentry] GPU: %.1f\n[Sentry] CPU: %.1f\n[Sentry] eDRAM: %.1f\n[Sentry] Mobo: %.1f\n", tempResults[SMC_TEMP_TYPE_GPU], tempResults[SMC_TEMP_TYPE_CPU], tempResults[SMC_TEMP_TYPE_MEMORY], tempResults[SMC_TEMP_TYPE_CASE]);

  000a4	c07f0008	 lfs          fr3,8(r31)
  000a8	7fa3eb78	 mr           r3,r29
  000ac	c05f0000	 lfs          fr2,0(r31)
  000b0	c03f0004	 lfs          fr1,4(r31)
  000b4	d8610028	 stfd         fr3,28h(r1)
  000b8	e8c10028	 ld           r6,28h(r1)
  000bc	d8410020	 stfd         fr2,20h(r1)
  000c0	e8a10020	 ld           r5,20h(r1)
  000c4	d8210018	 stfd         fr1,18h(r1)
  000c8	e8810018	 ld           r4,18h(r1)
  000cc	c09f000c	 lfs          fr4,0Ch(r31)
  000d0	d8810030	 stfd         fr4,30h(r1)
  000d4	e8e10030	 ld           r7,30h(r1)
  000d8	48000001	 bl           printf

; 61   : 			}
; 62   : 			Sleep(5000);

  000dc	38601388	 li           r3,5000		; 1388h
  000e0	48000001	 bl           Sleep
  000e4	817c0000	 lwz          r11,?Terminating@Main@@3HA(r28)
  000e8	2f0b0000	 cmpwi        cr6,r11,0
  000ec	419aff50	 beq          cr6,$LL3@TempThread
$LN2@TempThread:

; 63   : 		}
; 64   : 	}

  000f0	382100b0	 addi         r1,r1,176		; 0B0h
  000f4	cbe1ffd0	 lfd          fr31,-30h(r1)
  000f8	48000000	 b            __restgprlr_28
$M104022:
; End code for function: ?TempThread@Main@@YAXXZ
?TempThread@Main@@YAXXZ ENDP
							; Main::TempThread
PUBLIC	?Init@Main@@YAXXZ				; Main::Init
;	COMDAT .pdata
; File c:\users\element18592\desktop\sentry\sentry\utils\utilities.cpp
.pdata	SEGMENT
$T104039 DD	?Init@Main@@YAXXZ
	DD	040003603H
; Function compile flags: /Ogsu
; File c:\users\element18592\desktop\sentry\sentry\main.cpp

	.code
handle$104035 = 80					; size = 4
handle$104030 = 80					; size = 4
lpThreadId$104036 = 84					; size = 4
lpThreadId$104031 = 84					; size = 4

?Init@Main@@YAXXZ PROC NEAR				; Main::Init, COMDAT

; Begin code for function: ?Init@Main@@YAXXZ

; 66   : 	VOID Init(){

  00000	7d8802a6	 mflr         r12
  00004	9181fff8	 stw          r12,-8(r1)
  00008	9421ffa0	 stwu         r1,-60h(r1)
.endprolog
$M104037:

; 67   : 		Devkit =  *(DWORD*)0x8E038610 & 0x8000 ? FALSE : TRUE;

  0000c	3d608e04	 lis          r11,-29180		; 8E04h

; 68   : 		Sleep(10000);

  00010	3d400000	 lis          r10,?Devkit@Main@@3HA
  00014	38602710	 li           r3,10000		; 2710h
  00018	816b8610	 lwz          r11,-79F0h(r11)
  0001c	7d6b58f8	 not          r11,r11
  00020	556b8ffe	 rlwinm       r11,r11,17,31,31
  00024	916a0000	 stw          r11,?Devkit@Main@@3HA(r10)
  00028	48000001	 bl           Sleep

; 69   : 		printf("\nSentry started!\n");

  0002c	3d600000	 lis          r11,??_C@_0BC@IGPEAJC@?6Sentry?5started?$CB?6?$AA@
  00030	386b0000	 addi         r3,r11,??_C@_0BC@IGPEAJC@?6Sentry?5started?$CB?6?$AA@
  00034	48000001	 bl           printf

; 70   : 		Tools::ThreadMe((LPTHREAD_START_ROUTINE)TitleThread, NULL);

  00038	3d600000	 lis          r11,?TitleThread@Main@@YAXXZ
  0003c	3d400000	 lis          r10,XapiThreadStartup
  00040	39200006	 li           r9,6
  00044	39000000	 li           r8,0
  00048	38eb0000	 addi         r7,r11,?TitleThread@Main@@YAXXZ
  0004c	38ca0000	 addi         r6,r10,XapiThreadStartup
  00050	38a10054	 addi         r5,r1,lpThreadId$104031
  00054	38800000	 li           r4,0
  00058	38610050	 addi         r3,r1,handle$104030
  0005c	48000001	 bl           ExCreateThread
  00060	38800004	 li           r4,4
  00064	80610050	 lwz          r3,handle$104030(r1)		; 80 (50h)
  00068	48000001	 bl           XSetThreadProcessor
  0006c	38800001	 li           r4,1
  00070	80610050	 lwz          r3,handle$104030(r1)		; 80 (50h)
  00074	48000001	 bl           SetThreadPriority
  00078	80610050	 lwz          r3,handle$104030(r1)		; 80 (50h)
  0007c	48000001	 bl           ResumeThread

; 71   : 		Tools::ThreadMe((LPTHREAD_START_ROUTINE)TempThread, NULL);

  00080	3d600000	 lis          r11,?TempThread@Main@@YAXXZ
  00084	3d400000	 lis          r10,XapiThreadStartup
  00088	39200006	 li           r9,6
  0008c	39000000	 li           r8,0
  00090	38eb0000	 addi         r7,r11,?TempThread@Main@@YAXXZ
  00094	38ca0000	 addi         r6,r10,XapiThreadStartup
  00098	38a10054	 addi         r5,r1,lpThreadId$104036
  0009c	38800000	 li           r4,0
  000a0	38610050	 addi         r3,r1,handle$104035
  000a4	48000001	 bl           ExCreateThread
  000a8	38800004	 li           r4,4
  000ac	80610050	 lwz          r3,handle$104035(r1)		; 80 (50h)
  000b0	48000001	 bl           XSetThreadProcessor
  000b4	38800001	 li           r4,1
  000b8	80610050	 lwz          r3,handle$104035(r1)		; 80 (50h)
  000bc	48000001	 bl           SetThreadPriority
  000c0	80610050	 lwz          r3,handle$104035(r1)		; 80 (50h)
  000c4	48000001	 bl           ResumeThread

; 72   : 	}

  000c8	38210060	 addi         r1,r1,96		; 60h
  000cc	8181fff8	 lwz          r12,-8(r1)
  000d0	7d8803a6	 mtlr         r12
  000d4	4e800020	 blr
$M104038:
; End code for function: ?Init@Main@@YAXXZ
?Init@Main@@YAXXZ ENDP
							; Main::Init
PUBLIC	DllMain
EXTRN	XamLoaderGetDvdTrayState:PROC
;	COMDAT .pdata
; File c:\users\element18592\desktop\sentry\sentry\utils\utilities.cpp
.pdata	SEGMENT
$T104050 DD	DllMain
	DD	040002703H
; Function compile flags: /Ogsu
; File c:\users\element18592\desktop\sentry\sentry\main.cpp

	.code
handle$104046 = 80					; size = 4
lpThreadId$104047 = 84					; size = 4

DllMain	PROC NEAR					; COMDAT

; Begin code for function: DllMain

; 75   : BOOL APIENTRY DllMain(HANDLE hModule, DWORD dwReason, LPVOID lpReserved){

  00000	7d8802a6	 mflr         r12
  00004	9181fff8	 stw          r12,-8(r1)
  00008	9421ffa0	 stwu         r1,-60h(r1)
.endprolog
$M104048:

; 76   : 	if(dwReason == DLL_PROCESS_ATTACH) {

  0000c	2b040001	 cmplwi       cr6,r4,1
  00010	409a005c	 bne          cr6,$LN4@DllMain

; 77   : 		if(XamLoaderGetDvdTrayState() != DVD_TRAY_STATE_OPEN) {

  00014	48000001	 bl           XamLoaderGetDvdTrayState
  00018	2f030002	 cmpwi        cr6,r3,2
  0001c	419a006c	 beq          cr6,$LN1@DllMain

; 78   : 			Tools::ThreadMe((LPTHREAD_START_ROUTINE)Main::Init, NULL);

  00020	3d600000	 lis          r11,?Init@Main@@YAXXZ
  00024	3d400000	 lis          r10,XapiThreadStartup
  00028	39200006	 li           r9,6
  0002c	39000000	 li           r8,0
  00030	38eb0000	 addi         r7,r11,?Init@Main@@YAXXZ
  00034	38ca0000	 addi         r6,r10,XapiThreadStartup
  00038	38a10054	 addi         r5,r1,lpThreadId$104047
  0003c	38800000	 li           r4,0
  00040	38610050	 addi         r3,r1,handle$104046
  00044	48000001	 bl           ExCreateThread
  00048	38800004	 li           r4,4
  0004c	80610050	 lwz          r3,handle$104046(r1)		; 80 (50h)
  00050	48000001	 bl           XSetThreadProcessor
  00054	38800001	 li           r4,1
  00058	80610050	 lwz          r3,handle$104046(r1)		; 80 (50h)
  0005c	48000001	 bl           SetThreadPriority
  00060	80610050	 lwz          r3,handle$104046(r1)		; 80 (50h)
  00064	48000001	 bl           ResumeThread

; 79   : 		}

  00068	48000020	 b            $LN1@DllMain
$LN4@DllMain:

; 80   : 	} else if (dwReason == DLL_PROCESS_DETACH){

  0006c	2b040000	 cmplwi       cr6,r4,0
  00070	409a0018	 bne          cr6,$LN1@DllMain

; 81   : 		Main::Terminating = TRUE;

  00074	3d400000	 lis          r10,?Terminating@Main@@3HA
  00078	39600001	 li           r11,1

; 82   : 		Sleep(2500);

  0007c	386009c4	 li           r3,2500		; 9C4h
  00080	916a0000	 stw          r11,?Terminating@Main@@3HA(r10)
  00084	48000001	 bl           Sleep
$LN1@DllMain:

; 83   : 	}	
; 84   : 	return TRUE;

  00088	38600001	 li           r3,1

; 85   : }

  0008c	38210060	 addi         r1,r1,96		; 60h
  00090	8181fff8	 lwz          r12,-8(r1)
  00094	7d8803a6	 mtlr         r12
  00098	4e800020	 blr
$M104049:
; End code for function: DllMain
DllMain	ENDP

PUBLIC	__pool@_0
__pool@_0 DB	';', 080H, 00H, 00H
END
